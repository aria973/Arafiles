:root{
  --accent-blue:#3B82F6; --accent-green:#10B981; --accent-purple:#8B5CF6;
  --accent-red:#EF4444; --accent-cyan:#0EA5E9; --accent-amber:#F59E0B;

  /* iOS safe-area */
  --sat: env(safe-area-inset-top, 0px);
  --sab: env(safe-area-inset-bottom, 0px);
}

/* تم‌ها */
body.light {
  --bg:#E9EEF5; --text:#0B0E12;
  --glass-bg:rgba(255,255,255,0.60); --glass-border:rgba(0,0,0,0.08);
}
body.dark {
  --bg:#0F172A; --text:#F9FAFB;
  --glass-bg:rgba(255,255,255,0.08); --glass-border:rgba(255,255,255,0.25);
}

*{ box-sizing:border-box; }

html, body{
  height:100%;
}

/* نکته: 100vh روی iOS مشکل دارد → dvh/svh */
body{
  min-height: 100dvh;
  min-height: 100svh;
  font-family:'Vazirmatn',sans-serif;
  margin:0;
  background:var(--bg);
  color:var(--text);

  /* جلوگیری از “کش آمدن” اسکرول و لگ‌های bounce */
  overscroll-behavior: none;

  /* وب‌اپ iOS: لمس‌ها روان‌تر */
  -webkit-tap-highlight-color: transparent;
}

/* اجازه‌ی انتخاب متن داخل input/textarea */
input, textarea, [contenteditable="true"]{
  -webkit-user-select: text;
  user-select: text;
}

/* برای دکمه‌ها و UI: انتخاب متن لازم نیست */
button, .icon-btn, .floating-btn{
  -webkit-user-select: none;
  user-select: none;
  touch-action: manipulation; /* کاهش احتمال double-tap zoom */
}

.container{
  padding: 16px;
  max-width:1200px;
  margin:0 auto;

  /* فضا برای safe-area پایین */
  padding-bottom: calc(16px + var(--sab));
}

/* Header */
.app-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:10px;

  padding: calc(10px + var(--sat)) 16px 12px 16px;

  position: sticky;
  top: 0;
  z-index: 50;

  /* برای اینکه محتوا زیر header نرود */
  backdrop-filter: blur(22px);
}

.logo{ font-size:1.35rem; font-weight:700; margin:0; }
.header-actions{ display:flex; gap:8px; align-items:center; }

/* Buttons */
button{
  border:none;
  border-radius:12px;
  padding:10px 14px;
  cursor:pointer;
  font: inherit;
}
.primary{ background:var(--accent-blue); color:#fff; }
.secondary{ background:rgba(0,0,0,0.08); color:var(--text); }
.danger{ background:var(--accent-red); color:#fff; }

.icon-btn{
  background:transparent;
  color:var(--text);
  padding:8px;
  border-radius:12px;
  cursor:pointer;
}
.icon-btn:active{ transform: scale(0.98); }
.icon-btn:hover{ background:rgba(0,0,0,0.06); }

.floating-btn{
  position:fixed;
  bottom: calc(20px + var(--sab));
  right:20px;
  background:var(--accent-blue);
  color:#fff;
  border-radius:50%;
  width:56px;
  height:56px;
  display:flex;
  align-items:center;
  justify-content:center;
  box-shadow:0 4px 14px rgba(0,0,0,0.28);
  z-index:100;
}

/* Glass */
.glass-3d{
  background:var(--glass-bg);
  border:1px solid var(--glass-border);
  border-radius:16px;
  backdrop-filter: blur(22px);
}

.card{
  padding:16px;
  margin:10px 0;
  border-radius:16px;
  transition:transform .2s ease, box-shadow .2s ease;
}

/* Grid */
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fill, minmax(260px, 1fr));
  gap:12px;
}
.grid .card:hover{
  transform:translateY(-4px);
  box-shadow:0 6px 18px rgba(0,0,0,0.25);
  cursor:pointer;
}
.empty{ text-align:center; padding:32px; opacity:0.9; }

/* Folder glow */
.folder-glow{ position:relative; }
.folder-glow::before{
  content:"";
  position:absolute;
  inset:-4px;
  border-radius:18px;
  background:var(--glow,var(--accent-blue));
  filter:blur(14px);
  opacity:.35;
  z-index:-1;
}

/* Modal */
.modal-overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.35);
  backdrop-filter:blur(8px);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:200;
  padding: 18px;
}
.modal-overlay.active{ display:flex; }
.modal-panel{
  width:min(680px, 92vw);
  text-align:center;
  max-height: calc(100dvh - 40px);
  overflow:auto;
}
.modal-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:10px 16px;
  position: sticky;
  top: 0;
  background: transparent;
}
.modal-body{ padding:8px 16px 16px; }

.row{ margin:10px 0; }
.row-inline{
  display:flex;
  gap:8px;
  align-items:center;
  flex-wrap:wrap;
  justify-content:center;
}

/* Background previews */
.preview-row{ display:flex; gap:10px; flex-wrap:wrap; justify-content:center; }
.preview-tile{
  width:120px;
  height:64px;
  border-radius:12px;
  border:1px solid var(--glass-border);
  cursor:pointer;
}
.preview-tile.active{ box-shadow:0 0 0 3px var(--accent-blue); }

/* Crop area */
.crop-area{
  width:100%;
  height:360px;
  background:rgba(0,0,0,0.20);
  border-radius:12px;
  overflow:hidden;
  margin:12px 0;
}

/* Inputs */
input, textarea, select{
  width:100%;
  border-radius:12px;
  border:1px solid var(--glass-border);
  padding:10px 12px;
  background:rgba(0,0,0,0.04);
  color:var(--text);
  font: inherit;
}
input[type="number"]{ max-width:120px; }

/* Questions */
.question{
  display:flex;
  flex-direction:column;
  gap:8px;
  padding:12px;
}
.question .top-row{
  display:flex;
  align-items:center;
  gap:8px;
}
.question .spacer{ flex:1; }

/* روی موبایل hover نداریم → actions را همیشه نشان بده */
.question .actions{ display:none; gap:8px; }
@media (hover: none) {
  .question .actions{ display:flex; }
}
@media (hover: hover) {
  .question:hover .actions{ display:flex; }
}

.question-img{
  max-width:100%;
  max-height:240px;
  object-fit:contain;
  border-radius:12px;
  border:1px solid rgba(255,255,255,0.15);
}
.options{ margin-top:8px; padding:0; }
.options li{ margin:4px 0; list-style:none; }

/* Alignment */
.question[align="center"]{ text-align:center; }
.question[align="right"]{ text-align:right; }
.question[align="left"]{ text-align:left; }

/* Responsive */
@media(max-width:768px){
  .grid{ grid-template-columns:1fr; }
  .header-actions{ gap:6px; }
}

.hidden{ display:none !important; }



/* --- Fix ugly square around glow on iOS/Safari --- */

/* 1) prevent iOS focus/selection highlight */
.folder-glow,
.folder-glow * {
  -webkit-tap-highlight-color: transparent;
}

/* 2) remove focus outline if Safari tries to apply it */
.folder-glow:focus,
.folder-glow:focus-visible,
.folder-glow:active {
  outline: none !important;
}

/* 3) make glow smooth and not "boxed" */
.folder-glow {
  position: relative;
  overflow: visible;              /* allow blur to fade naturally */
  border-radius: 18px;
  transform: translateZ(0);       /* force proper compositing */
}

/* glow layer */
.folder-glow::before{
  content:"";
  position:absolute;
  inset:-10px;                    /* bigger than card so you don't see a hard edge */
  border-radius: 24px;
  background: var(--glow, var(--accent-blue));
  filter: blur(18px);
  opacity: .30;
  z-index: -1;
  pointer-events: none;
}

/* 4) remove any visible border on the card itself (the box you see) */
.folder-glow.glass-3d {
  border-color: transparent !important;
}

/* optional: keep a super soft border if you want (instead of the ugly one) */
/*
.folder-glow.glass-3d {
  border: 1px solid rgba(255,255,255,0.12) !important;
}
*/




/* Safari sometimes draws an inner highlight on click */
.folder-glow {
  -webkit-touch-callout: none;
  user-select: none;
}









